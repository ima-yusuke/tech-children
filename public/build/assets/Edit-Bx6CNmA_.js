import{u as v,j as e,H as p,L as f,r as y}from"./app-CR2mS3-6.js";import{A as b}from"./AuthenticatedLayout-BsCytBDy.js";import{I as l}from"./InputLabel-DLKgcrpr.js";import{T as n,I as d}from"./InputError-CayinWuS.js";import{P as N}from"./PrimaryButton-CfK3v0HF.js";import{D as _}from"./DangerButton-ioVxLxdW.js";import"./ApplicationLogo-BfKjuIN6.js";import"./transition-CbEk4oQg.js";function q({post:a,categories:o,tags:c}){const{data:t,setData:r,put:m,processing:u,errors:i}=v({title:a.title||"",slug:a.slug||"",excerpt:a.excerpt||"",content:a.content||"",category_id:a.category_id||"",status:a.status||"draft",published_at:a.published_at||"",featured_image:a.featured_image||"",tag_ids:a.tags?.map(s=>s.id)||[],change_summary:""}),x=s=>{s.preventDefault(),m(route("admin.posts.update",a.id))},g=()=>{confirm("本当に削除しますか?")&&y.delete(route("admin.posts.destroy",a.id))};return e.jsxs(b,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"記事編集"}),children:[e.jsx(p,{title:"記事編集"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("form",{onSubmit:x,className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"title",value:"タイトル"}),e.jsx(n,{id:"title",type:"text",value:t.title,onChange:s=>r("title",s.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(d,{message:i.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"slug",value:"スラッグ"}),e.jsx(n,{id:"slug",type:"text",value:t.slug,onChange:s=>r("slug",s.target.value),className:"mt-1 block w-full"}),e.jsx(d,{message:i.slug,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"category_id",value:"カテゴリ"}),e.jsxs("select",{id:"category_id",value:t.category_id,onChange:s=>r("category_id",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"選択してください"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(d,{message:i.category_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"タグ"}),e.jsx("div",{className:"mt-2 space-y-2",children:c.map(s=>e.jsxs("label",{className:"inline-flex items-center mr-4",children:[e.jsx("input",{type:"checkbox",value:s.id,checked:t.tag_ids.includes(s.id),onChange:h=>{h.target.checked?r("tag_ids",[...t.tag_ids,s.id]):r("tag_ids",t.tag_ids.filter(j=>j!==s.id))},className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:s.name})]},s.id))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"excerpt",value:"抜粋"}),e.jsx("textarea",{id:"excerpt",value:t.excerpt,onChange:s=>r("excerpt",s.target.value),rows:"3",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx(d,{message:i.excerpt,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"content",value:"本文"}),e.jsx("textarea",{id:"content",value:t.content,onChange:s=>r("content",s.target.value),rows:"15",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),e.jsx(d,{message:i.content,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"change_summary",value:"変更内容の要約（任意）"}),e.jsx(n,{id:"change_summary",type:"text",value:t.change_summary,onChange:s=>r("change_summary",s.target.value),className:"mt-1 block w-full",placeholder:"例: 誤字修正、情報追加"}),e.jsx(d,{message:i.change_summary,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",value:"ステータス"}),e.jsxs("select",{id:"status",value:t.status,onChange:s=>r("status",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"draft",children:"下書き"}),e.jsx("option",{value:"published",children:"公開"}),e.jsx("option",{value:"private",children:"限定公開"})]}),e.jsx(d,{message:i.status,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{disabled:u,children:"更新"}),e.jsx(f,{href:route("admin.posts.index"),className:"text-sm text-gray-600 underline hover:text-gray-900",children:"キャンセル"})]}),e.jsx(_,{type:"button",onClick:g,children:"削除"})]})]})})})})})]})}export{q as default};
