import{u as N,a as m,j as e,H as y,L as w,b as _}from"./app-CePk50-8.js";import{A as k}from"./AuthenticatedLayout-B7SCTavu.js";import{I as l}from"./InputLabel-CvX_1gzN.js";import{T as u,I as n}from"./InputError-BRDDeBYR.js";import{P as C}from"./PrimaryButton-EJToLUNk.js";import"./ApplicationLogo-ZtHIpzYx.js";import"./transition-DXQYGFno.js";function H({categories:x,tags:g}){const{data:s,setData:a,post:h,processing:p,errors:r}=N({title:"",slug:"",excerpt:"",content:"",generated_content:"",category_id:"",status:"draft",published_at:"",featured_image:"",tag_ids:[]}),[d,o]=m.useState(!1),[c,i]=m.useState(""),j=t=>{t.preventDefault(),h(route("admin.posts.store"))},f=async()=>{if(!s.title){alert("ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");return}if(!s.content){alert("å…ƒãƒã‚¿ã¨ãªã‚‹æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");return}o(!0),i("");try{const t=await _.post(route("admin.posts.generate"),{title:s.title,raw_content:s.content});t.data.success?(a("generated_content",t.data.generated_content),alert("è¨˜äº‹ã‚’ç”Ÿæˆã—ã¾ã—ãŸï¼ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹ã¯ä¸‹ã®ã€ŒAIç”Ÿæˆè¨˜äº‹ã€æ¬„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚")):i(t.data.message||"è¨˜äº‹ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}catch(t){i(t.response?.data?.message||"è¨˜äº‹ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{o(!1)}};return e.jsxs(k,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"è¨˜äº‹ä½œæˆ"}),children:[e.jsx(y,{title:"è¨˜äº‹ä½œæˆ"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("form",{onSubmit:j,className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"title",value:"ã‚¿ã‚¤ãƒˆãƒ«"}),e.jsx(u,{id:"title",type:"text",value:s.title,onChange:t=>a("title",t.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(n,{message:r.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"slug",value:"ã‚¹ãƒ©ãƒƒã‚°ï¼ˆä»»æ„ï¼‰"}),e.jsx(u,{id:"slug",type:"text",value:s.slug,onChange:t=>a("slug",t.target.value),className:"mt-1 block w-full"}),e.jsx(n,{message:r.slug,className:"mt-2"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"ç©ºæ¬„ã®å ´åˆã¯ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"category_id",value:"ã‚«ãƒ†ã‚´ãƒª"}),e.jsxs("select",{id:"category_id",value:s.category_id,onChange:t=>a("category_id",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(n,{message:r.category_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"ã‚¿ã‚°"}),e.jsx("div",{className:"mt-2 space-y-2",children:g.map(t=>e.jsxs("label",{className:"inline-flex items-center mr-4",children:[e.jsx("input",{type:"checkbox",value:t.id,checked:s.tag_ids.includes(t.id),onChange:v=>{v.target.checked?a("tag_ids",[...s.tag_ids,t.id]):a("tag_ids",s.tag_ids.filter(b=>b!==t.id))},className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t.name})]},t.id))}),e.jsx(n,{message:r.tag_ids,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"excerpt",value:"æŠœç²‹"}),e.jsx("textarea",{id:"excerpt",value:s.excerpt,onChange:t=>a("excerpt",t.target.value),rows:"3",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx(n,{message:r.excerpt,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(l,{htmlFor:"content",value:"æœ¬æ–‡"}),e.jsx("button",{type:"button",onClick:f,disabled:d||!s.title||!s.content,className:"inline-flex items-center rounded-md bg-purple-600 px-3 py-1 text-sm font-semibold text-white shadow-sm hover:bg-purple-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ç”Ÿæˆä¸­..."]}):"âœ¨ AIã§è¨˜äº‹ã‚’ç”Ÿæˆ"})]}),e.jsx("textarea",{id:"content",value:s.content,onChange:t=>a("content",t.target.value),rows:"15",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,placeholder:"ã‚³ãƒ”ãƒšã—ãŸå…ƒãƒã‚¿ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚AIãŒåˆå­¦è€…å‘ã‘ã®è¨˜äº‹ã«å¤‰æ›ã—ã¾ã™ã€‚"}),c&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:c}),e.jsx(n,{message:r.content,className:"mt-2"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"ğŸ’¡ ä½¿ã„æ–¹: ã‚¿ã‚¤ãƒˆãƒ«ã¨å…ƒãƒã‚¿ã‚’å…¥åŠ›å¾Œã€ã€ŒAIã§è¨˜äº‹ã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯"})]}),s.generated_content&&e.jsxs("div",{className:"border-2 border-purple-200 rounded-lg p-4 bg-purple-50",children:[e.jsx(l,{htmlFor:"generated_content",value:"âœ¨ AIç”Ÿæˆè¨˜äº‹ï¼ˆãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼ï¼‰"}),e.jsx("textarea",{id:"generated_content",value:s.generated_content,onChange:t=>a("generated_content",t.target.value),rows:"20",className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 font-mono text-sm"}),e.jsx("p",{className:"mt-2 text-sm text-purple-700",children:"ğŸ“ ã“ã¡ã‚‰ãŒå…¬é–‹ã•ã‚Œã‚‹è¨˜äº‹ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ç·¨é›†ã—ã¦ãã ã•ã„ã€‚"}),e.jsx(n,{message:r.generated_content,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",value:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"}),e.jsxs("select",{id:"status",value:s.status,onChange:t=>a("status",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"draft",children:"ä¸‹æ›¸ã"}),e.jsx("option",{value:"published",children:"å…¬é–‹"}),e.jsx("option",{value:"private",children:"é™å®šå…¬é–‹"})]}),e.jsx(n,{message:r.status,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{disabled:p,children:"ä½œæˆ"}),e.jsx(w,{href:route("admin.posts.index"),className:"text-sm text-gray-600 underline hover:text-gray-900",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})]})]})})})})})]})}export{H as default};
