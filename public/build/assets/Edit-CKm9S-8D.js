import{u as _,a as x,j as e,H as w,L as k,r as C,b as F}from"./app-Bu0WkHVs.js";import{A as I}from"./AuthenticatedLayout-kfm2t5Xd.js";import{I as l}from"./InputLabel-1O7fGOJG.js";import{T as o,I as i}from"./InputError-D7glEX5f.js";import{P as A}from"./PrimaryButton-DTvsBEsf.js";import{D as E}from"./DangerButton-BQMFfxhb.js";/* empty css            */import"./ApplicationLogo-DlW_S_u5.js";import"./transition-865FZRvf.js";function T({post:a,categories:g,tags:h}){const{data:s,setData:r,put:p,processing:j,errors:n}=_({title:a.title||"",slug:a.slug||"",excerpt:a.excerpt||"",content:a.content||"",generated_content:a.generated_content||"",category_id:a.category_id||"",status:a.status||"draft",published_at:a.published_at||"",featured_image:a.featured_image||"",tag_ids:a.tags?.map(t=>t.id)||[],change_summary:""}),[c,m]=x.useState(!1),[u,d]=x.useState(""),f=t=>{t.preventDefault(),p(route("admin.posts.update",a.id))},v=()=>{confirm("æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹?")&&C.delete(route("admin.posts.destroy",a.id))},b=async()=>{if(!s.title){alert("ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");return}if(!s.content){alert("å…ƒãƒã‚¿ã¨ãªã‚‹æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");return}m(!0),d("");try{const t=await F.post(route("admin.posts.generate"),{title:s.title,raw_content:s.content});t.data.success?(r("generated_content",t.data.generated_content),alert("è¨˜äº‹ã‚’ç”Ÿæˆã—ã¾ã—ãŸï¼ç”Ÿæˆã•ã‚ŒãŸè¨˜äº‹ã¯ä¸‹ã®ã€ŒAIç”Ÿæˆè¨˜äº‹ã€æ¬„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚")):d(t.data.message||"è¨˜äº‹ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}catch(t){d(t.response?.data?.message||"è¨˜äº‹ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}finally{m(!1)}};return e.jsxs(I,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"è¨˜äº‹ç·¨é›†"}),children:[e.jsx(w,{title:"è¨˜äº‹ç·¨é›†"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("form",{onSubmit:f,className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"title",value:"ã‚¿ã‚¤ãƒˆãƒ«"}),e.jsx(o,{id:"title",type:"text",value:s.title,onChange:t=>r("title",t.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(i,{message:n.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"slug",value:"ã‚¹ãƒ©ãƒƒã‚°"}),e.jsx(o,{id:"slug",type:"text",value:s.slug,onChange:t=>r("slug",t.target.value),className:"mt-1 block w-full"}),e.jsx(i,{message:n.slug,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"category_id",value:"ã‚«ãƒ†ã‚´ãƒª"}),e.jsxs("select",{id:"category_id",value:s.category_id,onChange:t=>r("category_id",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(i,{message:n.category_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"ã‚¿ã‚°"}),e.jsx("div",{className:"mt-2 space-y-2",children:h.map(t=>e.jsxs("label",{className:"inline-flex items-center mr-4",children:[e.jsx("input",{type:"checkbox",value:t.id,checked:s.tag_ids.includes(t.id),onChange:y=>{y.target.checked?r("tag_ids",[...s.tag_ids,t.id]):r("tag_ids",s.tag_ids.filter(N=>N!==t.id))},className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t.name})]},t.id))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"excerpt",value:"æŠœç²‹"}),e.jsx("textarea",{id:"excerpt",value:s.excerpt,onChange:t=>r("excerpt",t.target.value),rows:"3",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx(i,{message:n.excerpt,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(l,{htmlFor:"content",value:"æœ¬æ–‡ï¼ˆå…ƒãƒã‚¿ï¼‰"}),e.jsx("button",{type:"button",onClick:b,disabled:c||!s.title||!s.content,className:"inline-flex items-center rounded-md bg-purple-600 px-3 py-1 text-sm font-semibold text-white shadow-sm hover:bg-purple-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ç”Ÿæˆä¸­..."]}):"âœ¨ AIã§è¨˜äº‹ã‚’ç”Ÿæˆ"})]}),e.jsx("textarea",{id:"content",value:s.content,onChange:t=>r("content",t.target.value),rows:"15",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,placeholder:"ã‚³ãƒ”ãƒšã—ãŸå…ƒãƒã‚¿ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚AIãŒåˆå­¦è€…å‘ã‘ã®è¨˜äº‹ã«å¤‰æ›ã—ã¾ã™ã€‚"}),u&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:u}),e.jsx(i,{message:n.content,className:"mt-2"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"ğŸ’¡ ä½¿ã„æ–¹: ã‚¿ã‚¤ãƒˆãƒ«ã¨å…ƒãƒã‚¿ã‚’å…¥åŠ›å¾Œã€ã€ŒAIã§è¨˜äº‹ã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯"})]}),s.generated_content&&e.jsxs("div",{className:"border-2 border-purple-200 rounded-lg p-4 bg-purple-50",children:[e.jsx(l,{htmlFor:"generated_content",value:"âœ¨ AIç”Ÿæˆè¨˜äº‹ï¼ˆãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼ï¼‰"}),e.jsx("textarea",{id:"generated_content",value:s.generated_content,onChange:t=>r("generated_content",t.target.value),rows:"20",className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 font-mono text-sm"}),e.jsx("p",{className:"mt-2 text-sm text-purple-700",children:"ğŸ“ ã“ã¡ã‚‰ãŒå…¬é–‹ã•ã‚Œã‚‹è¨˜äº‹ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ç·¨é›†ã—ã¦ãã ã•ã„ã€‚"}),e.jsx(i,{message:n.generated_content,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"change_summary",value:"å¤‰æ›´å†…å®¹ã®è¦ç´„ï¼ˆä»»æ„ï¼‰"}),e.jsx(o,{id:"change_summary",type:"text",value:s.change_summary,onChange:t=>r("change_summary",t.target.value),className:"mt-1 block w-full",placeholder:"ä¾‹: èª¤å­—ä¿®æ­£ã€æƒ…å ±è¿½åŠ "}),e.jsx(i,{message:n.change_summary,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",value:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"}),e.jsxs("select",{id:"status",value:s.status,onChange:t=>r("status",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"draft",children:"ä¸‹æ›¸ã"}),e.jsx("option",{value:"published",children:"å…¬é–‹"}),e.jsx("option",{value:"private",children:"é™å®šå…¬é–‹"})]}),e.jsx(i,{message:n.status,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{disabled:j,children:"æ›´æ–°"}),e.jsx(k,{href:route("admin.posts.index"),className:"text-sm text-gray-600 underline hover:text-gray-900",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})]}),e.jsx(E,{type:"button",onClick:v,children:"å‰Šé™¤"})]})]})})})})})]})}export{T as default};
